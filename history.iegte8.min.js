/*
 * History API JavaScript Library v4.0.4
 *
 * Support: IE8+, FF3+, Opera 9+, Safari, Chrome and other
 *
 * Copyright 2011-2013, Dmitrii Pakhtinov ( spb.piksel@gmail.com )
 *
 * http://spb-piksel.ru/
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Update: 12.08.13 11:21
 */
(function(d){var h=!0,j=null,n=!1;function C(){}function i(a,b,c){if(a&&!b)var b=i(),c=b.d,e=b.h,a=/^(?:[\w0-9]+\:)?\/\//.test(a)?0===a.indexOf("/")?e+a:a:e+"//"+b.g+(0===a.indexOf("/")?a:0===a.indexOf("?")?c+a:0===a.indexOf("#")?c+b.e+a:c.replace(/[^\/]+$/g,"")+a);else if(a=b?a:f.href,!p||c)a=a.replace(/^[^#]*/,"")||"#",a=f.protocol+"//"+f.host+k.basepath+a.replace(RegExp("^#[/]?(?:"+k.type+")?"),"");H.href=a;var a=/(?:([\w0-9]+:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/.exec(H.href),b=
a[2]+(a[3]?":"+a[3]:""),c=a[4]||"/",e=a[5]||"",d="#"===a[6]?"":a[6]||"",I=c+e+d,g=c.replace(RegExp("^"+k.basepath,"i"),k.type)+e;return{b:a[1]+"//"+b+I,h:a[1],g:b,i:a[2],k:a[3]||"",d:c,e:e,a:d,c:I,j:g,f:g+d}}function X(a){var b="";if(w)b+=w.getItem(x);else{var c=g.cookie.split(x+"=");1<c.length&&(b+=c.pop().split(";").shift()||"null")}try{l=a.parse(b)||{}}catch(e){l={}}o(r+"unload",function(){if(w)w.setItem(x,a.stringify(l));else{var b={};if(b[f.href]=m.state)g.cookie=x+"="+a.stringify(b)}},n)}function y(a,
b,c,e){var c=c||{set:C},f=!c.set,g=!c.get,i={configurable:h,set:function(){f=1},get:function(){g=1}};try{u(a,b,i),a[b]=a[b],u(a,b,c)}catch(m){}if(!f||!g)if(a.__defineGetter__&&(a.__defineGetter__(b,i.get),a.__defineSetter__(b,i.set),a[b]=a[b],c.get&&a.__defineGetter__(b,c.get),c.set&&a.__defineSetter__(b,c.set)),(!f||!g)&&a===d){try{var k=a[b];a[b]=j}catch(p){}if("execScript"in d)d.execScript("Public "+b,"VBScript");else try{u(a,b,{value:C})}catch(q){}a[b]=k}else if(!f||!g)try{try{var l=D.create(a);
u(D.getPrototypeOf(l)===a?l:a,b,c);for(var o in a)"function"===typeof a[o]&&(l[o]=a[o].bind(a));try{e.call(l,l,a)}catch(r){}a=l}catch(s){u(a.constructor.prototype,b,c)}}catch(t){return n}return a}function Y(a,b,c){c=c||{};a=a===J?f:a;c.set=c.set||function(c){a[b]=c};c.get=c.get||function(){return a[b]};return c}function z(a,b){var c=(""+("string"===typeof a?a:a.type)).replace(/^on/,""),e=s[c];if(e){b="string"===typeof a?b:a;if(b.target==j)for(var f=["target","currentTarget","srcElement","type"];a=
f.pop();)b=y(b,a,{get:"type"===a?function(){return c}:function(){return d}});(("popstate"===c?d.onpopstate:d.onhashchange)||C).call(d,b);for(var f=0,g=e.length;f<g;f++)e[f].call(d,b);return h}return Z(a,b)}function K(){var a=g.createEvent?g.createEvent("Event"):g.createEventObject();a.initEvent?a.initEvent("popstate",n,n):a.type="popstate";a.state=m.state;z(a)}function t(a,b,c,d){p||(b=i(b),b.c!==i().c&&(v=d,c?f.replace("#"+b.f):f.hash=b.f));!A&&a&&(l[f.href]=a);B=n}function L(a){if(v){M!==f.href&&
K();var a=a||d.event,b=i(v,h),c=i();a.oldURL||(a.oldURL=b.b,a.newURL=c.b);b.a!==c.a&&z(a)}v=f.href}function N(a){setTimeout(function(){o("popstate",function(a){M=f.href;A||(a=y(a,"state",{get:function(){return m.state}}));z(a)},n)},0);!p&&a!==h&&m.location&&(O(m.location.hash),B&&(B=n,K()))}function $(a){var a=a||d.event,b=a.target||a.srcElement,c="defaultPrevented"in a?a.defaultPrevented:a.returnValue===n;b&&"A"===b.nodeName&&!c&&(c=i(),b=i(b.getAttribute("href",2)),c.b.split("#").shift()===b.b.split("#").shift()&&
b.a&&(c.a!==b.a&&(m.location.hash=b.a),O(b.a),a.preventDefault?a.preventDefault():a.returnValue=n))}function O(a){var b=g.getElementById(a=(a||"").replace(/^#/,""));b&&b.id===a&&"A"===b.nodeName&&(a=b.getBoundingClientRect(),d.scrollTo(E.scrollLeft||0,a.top+(E.scrollTop||0)-(E.clientTop||0)))}if(d.history){var g=d.document,E=g.documentElement,w=d.sessionStorage,D=d.Object,P=d.JSON,f=d.location,q=d.history,m=q,F=q.pushState,Q=q.replaceState,p=!!F,A="state"in q,u=D.defineProperty,R=y({},"t")?{}:g.createElement("a"),
r="",G=d.addEventListener?"addEventListener":(r="on")&&"attachEvent",S=d.removeEventListener?"removeEventListener":"detachEvent",T=d.dispatchEvent?"dispatchEvent":"fireEvent",o=d[G],U=d[S],Z=d[T],k={basepath:"/",redirect:0,type:"/"},x="__historyAPI__",H=g.createElement("a"),v=f.href,M="",B=n,l={},s={},aa={onhashchange:j,onpopstate:j},V=function(a,b){var c=d.history!==q;c&&(d.history=q);a.apply(q,b);c&&(d.history=m)},W={redirect:function(a,b){k.basepath=b=b==j?k.basepath:b;k.type=a=a==j?k.type:a;if(d.top==
d.self){var c=i(j,n,h).c,e=f.pathname+f.search;p?(e=e.replace(/([^\/])$/,"$1/"),c!=b&&RegExp("^"+b+"$","i").test(e)&&f.replace(c)):e!=b&&(e=e.replace(/([^\/])\?/,"$1/?"),RegExp("^"+b,"i").test(e)&&f.replace(b+"#"+e.replace(RegExp("^"+b,"i"),a)+f.hash))}},pushState:function(a,b,c){F&&V(F,arguments);t(a,c)},replaceState:function(a,b,c){delete l[f.href];Q&&V(Q,arguments);t(a,c,h)},location:{set:function(a){d.location=a},get:function(){return p?f:R}},state:{get:function(){return l[f.href]||j}}},J={assign:function(a){0===
(""+a).indexOf("#")?t(j,a):f.assign(a)},reload:function(){f.reload()},replace:function(a){0===(""+a).indexOf("#")?t(j,a,h):f.replace(a)},toString:function(){return this.href},href:{get:function(){return i().b}},protocol:j,host:j,hostname:j,port:j,pathname:{get:function(){return i().d}},search:{get:function(){return i().e}},hash:{set:function(a){t(j,(""+a).replace(/^(#|)/,"#"),n,v)},get:function(){return i().a}}};(function(){var a=g.getElementsByTagName("script"),a=(a[a.length-1]||{}).src||"";(-1!==
a.indexOf("?")?a.split("?").pop():"").replace(/(\w+)(?:=([^&]*))?/g,function(a,b,c){k[b]=(c||("basepath"===b?"/":"")).replace(/^(0|false)$/,"")});o(r+"hashchange",L,n);var b=[J,R,aa,d,W,m];A&&delete W.state;for(var c=0;c<b.length;c+=2)for(var e in b[c])if(b[c].hasOwnProperty(e))if("function"===typeof b[c][e])b[c+1][e]=b[c][e];else{a=Y(b[c],e,b[c][e]);if(!y(b[c+1],e,a,function(a,e){if(e===m)d.history=m=b[c+1]=a}))return U(r+"hashchange",L,n),n;b[c+1]===d&&(s[e]=s[e.substr(2)]=[])}k.redirect&&m.redirect();
!A&&P&&X(P);if(!p)g[G](r+"click",$,n);"complete"===g.readyState?N(h):(!p&&i().c!==k.basepath&&(B=h),o(r+"load",N,n));return h})()&&(m.emulate=!p,d[G]=function(a,b,c){a in s?s[a].push(b):3<arguments.length?o(a,b,c,arguments[3]):o(a,b,c)},d[S]=function(a,b,c){var d=s[a];if(d)for(a=d.length;--a;){if(d[a]===b){d.splice(a,1);break}}else U(a,b,c)},d[T]=z)}})(window);
